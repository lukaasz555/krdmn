import Head from 'next/head';
import Link from 'next/link';
import axios from 'axios';
import { useEffect, useState } from 'react';
import { request } from '../api/menu_olsztyn';
import Menu from './components/Menu';
import Layout from './layout';

export interface ICourse {
	id: string;
	name: string;
	price: Number;
	desc?: string;
}

const apiQuery = `query Home {
    allCourses(first: 99) {
      id
      name
      price
      desc
    }
  }`;

export const getStaticProps = async () => {
	const data = await request({
		query: apiQuery,
		variables: { limit: 59 },
	});

	return {
		props: { data },
	};
};

export default function Home({ data }: any) {
	const [menu, setMenu] = useState<[] | ICourse[]>([]);

	useEffect(() => {
		console.log(data);
		setMenu(data);
	}, []);
	return (
		<>
			<Head>
				<title>Create Next App</title>
				<meta name='description' content='Generated by create next app' />
				<meta name='viewport' content='width=device-width, initial-scale=1' />
				<link rel='icon' href='/favicon.ico' />
			</Head>
			<main>
				<header>
					<Layout>
						<h1>page - Olsztyn</h1>
					</Layout>
				</header>
			</main>
		</>
	);
}
